!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("nano-sql"),require("react"));else if("function"==typeof define&&define.amd)define(["nano-sql","react"],e);else{var n="object"==typeof exports?e(require("nano-sql"),require("react")):e(t["nano-sql"],t.react);for(var o in n)("object"==typeof exports?exports:t)[o]=n[o]}}(window,function(t,e){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:o})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__assign||Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t};Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),i=n(0);e.bindNSQL=function(t,e){return function(n){function o(t){var e=n.call(this,t)||this;return e.state={data:void 0,isLoading:!0},e.updateState=e.updateState.bind(e),e}return r(o,n),o.prototype.componentWillMount=function(){if(e.tables&&e.tables.length)this.tables=e.tables;else{if(!t.tables)throw Error("Need tables for nanoSQL HOC!");this.tables=t.tables()}if(e.onChange)this.onChange=e.onChange;else{if(!t.onChange)throw Error("Need tables for nanoSQL HOC!");this.onChange=t.onChange}e.store?this.store=e.store:this.store=i.nSQL();for(var n=this.store.sTable,o=this.tables.length;o--;)this.store.table(this.tables[o]).on("change",this.updateState),this.updateState({table:this.tables[o],query:{table:this.tables[o],action:null,actionArgs:null,state:"complete",result:[],comments:[]},time:Date.now(),notes:["mount"],result:[],types:["change"],actionOrView:"",affectedRows:[]});this.store.table(n)},o.prototype.componentWillUnmount=function(){for(var t=this.store.sTable,e=this.tables.length;e--;)this.store.table(this.tables[e]).off("change",this.updateState);this.store.table(t)},o.prototype.updateState=function(t){var e=this;this.setState({isLoading:!0},function(){e.onChange(t,function(t){e.setState({isLoading:!1,data:t})})})},o.prototype.render=function(){return a.createElement(t,s({nSQLloading:this.state.isLoading,nSQLdata:this.state.data},this.props))},o}(a.Component)}}])});